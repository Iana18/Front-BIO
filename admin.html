<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard Melhorado</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="assets/css/adim.css">
<style>
  /* Estilo específico para perfil */
  #perfil-template {
    text-align: center;
    padding: 40px 0;
  }
  .user-login {
    font-size: 20px;
    margin: 0;
  }
  .user-email {
    font-size: 12px;
    color: gray;
    margin: 2px 0 0 0;
  }
</style>
</head>
<body>
<div class="layout">
  <!-- Menu lateral -->
  <div id="sider" class="sider">
    <h2><i class="fas fa-bars" onclick="toggleMenu()"></i> <span>Menu</span></h2>
    <div class="menu-container">
      <ul class="menu">
        <li onclick="loadContent('Home', this)">
          <div class="menu-item"><i class="fas fa-chart-pie"></i> <span>Home</span></div>
        </li>
        <li class="has-submenu">
          <div class="menu-item" onclick="toggleSubmenu(this)">
            <i class="fas fa-file-alt"></i> <span>Páginas</span>
            <i class="fas fa-chevron-right arrow"></i>
          </div>
          <ul class="submenu">
            <li onclick="loadContent('Usuários', this)"><i class="fas fa-user"></i> <span>Usuários</span></li>
            <li onclick="loadContent('Seres', this)"><i class="fas fa-dragon"></i> <span>Seres</span></li>
            <li onclick="loadContent('Denúncias', this)"><i class="fas fa-disease"></i> <span>Denúncias</span></li>
          </ul>
        </li>
        <li class="has-submenu">
          <div class="menu-item" onclick="toggleSubmenu(this)">
            <i class="fas fa-database"></i> <span>Cadastros</span>
            <i class="fas fa-chevron-right arrow"></i>
          </div>
          <ul class="submenu">
            <li onclick="loadContent('Espécies', this)"><i class="fas fa-paw"></i> <span>Espécies</span></li>
            <li onclick="loadContent('Categorias', this)"><i class="fas fa-list"></i> <span>Categorias</span></li>
            <li onclick="loadContent('Tipos', this)"><i class="fas fa-tags"></i> <span>Tipos</span></li>
          </ul>
        </li>
      </ul>
    </div>
    <!-- Botão Sair fixo no rodapé -->
    <div class="logout" onclick="loadContent('Logout', this)">
      <i class="fas fa-sign-out-alt"></i> <span>Sair</span>
    </div>
  </div>

  <!-- Área principal -->
  <div class="main">
    <div class="header">
      <button class="toggle-btn" onclick="toggleMenu()">☰</button>
      <div class="header-right" onclick="loadContent('Perfil')">
        <i class="fas fa-user-circle fa-lg"></i>
      </div>
    </div>

    <div class="content">
      <div id="breadcrumb" class="breadcrumb">Home</div>
      <div id="main-content">Conteúdo inicial do dashboard</div>
    </div>

    <div class="footer">
      Saki © <span id="year"></span>
    </div>
  </div>
</div>

<!-- Template de Perfil -->
<div id="perfil-template" style="display:none;">
  <h2>Perfil do Usuário</h2>
  <div class="user-info">
    <p class="user-login"></p>
    <p class="user-email"></p>
  </div>
</div>
<div id="modal-detalhes" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); justify-content:center; align-items:center;">
    <div id="modal-content" style="background:#fff; padding:20px; max-width:600px; width:90%; max-height:90%; overflow:auto; position:relative; border-radius:10px;">
        <button id="close-modal" style="position:absolute; top:10px; right:10px;">Fechar</button>
        <div id="modal-body"></div>
    </div>
</div>


<script>
document.getElementById('year').textContent = new Date().getFullYear();

// Toggle menu lateral
function toggleMenu() {
  document.getElementById('sider').classList.toggle('collapsed');
}

// Toggle submenu
function toggleSubmenu(element) {
  const li = element.parentElement;
  li.classList.toggle('open');
  const submenu = li.querySelector('.submenu');
  submenu.classList.toggle('open');
}

// Função unificada de loadContent
function loadContent(name, el = null) {
  const content = document.getElementById('main-content');
  const breadcrumb = document.getElementById('breadcrumb');

  // Marca menu ativo
  document.querySelectorAll('.menu li').forEach(li => li.classList.remove('active'));
  if(el && !el.classList.contains('logout')) el.parentElement.classList.add('active');

  breadcrumb.textContent = name;
  content.innerHTML = `<p>Carregando ${name}...</p>`;

  // Perfil
  if(name === "Perfil") {
    const login = localStorage.getItem("login") || "—";
    const email = localStorage.getItem("email") || "—";

    console.log("Carregando perfil:", login, email);

    const perfilTemplate = document.getElementById("perfil-template");
    const perfilClone = perfilTemplate.cloneNode(true);
    perfilClone.style.display = "block";
    perfilClone.querySelector(".user-login").textContent = login;
    perfilClone.querySelector(".user-email").textContent = email;

    content.innerHTML = "";
    content.appendChild(perfilClone);
    return;
  }
// Submenus de dados
if (name === "Usuários") fetchUsuarios();
else if (name === "Seres") fetchSeres();
else if (name === "Denúncias") fetchDenuncias();
else if (name === "Espécies") fetchEspecies();
else if (name === "Categorias") fetchCategorias();
else if (name === "Tipos") fetchTipos();
else content.innerHTML = `<h2>${name}</h2><p>Conteúdo em construção...</p>`;
}

// Placeholder das funções de dados
function fetchUsuarios() { console.log("Buscando Usuários..."); }
function fetchSeres() { console.log("Buscando Seres..."); }
function fetchDenuncias() { console.log("Buscando Denúncias..."); }
function fetchEspecies() { console.log("Buscando Espécies...");}
function fetchCategorias() {console.log("Buscando Categorias...");}
function fetchTipos() {console.log("Buscando Tipos...");}

</script>
<script src="assets/page/adim.js"></script>
</body>
</html>
